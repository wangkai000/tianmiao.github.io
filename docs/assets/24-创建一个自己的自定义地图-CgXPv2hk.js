import{u as n,_ as i}from"./WrapperPost-CBdctUM8.js";import{o as r,g as p,w as E,e as s,B as t}from"./app-Ddps5ZSK.js";import"./dayjs.min-DQVXBks5.js";import"./dark-V7k59D8P.js";const h=s("div",{class:"prose m-auto slide-enter-content"},[s("p",null,[s("div",{class:"table-of-contents"},[s("div",{class:"table-of-contents-anchor hidden"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M3 4h18v2H3zm0 7h12v2H3zm0 7h18v2H3z"})])]),s("ul",null,[s("li",null,[s("a",{href:"#tl-dr"},"TL;DR "),s("ul",null,[s("li",null,[s("a",{href:"#前言"},"前言 ")]),s("li",null,[s("a",{href:"#准备"},"准备 "),s("ul",null,[s("li",null,[s("a",{href:"#_1-安装-gdal"},"1. 安装 GDAL ")]),s("li",null,[s("a",{href:"#_2-gdal-绑定-python"},"2. GDAL 绑定 Python ")])])]),s("li",null,[s("a",{href:"#使用"},"使用 "),s("ul",null,[s("li",null,[s("a",{href:"#_1-设置图片的坐标系和范围"},"1. 设置图片的坐标系和范围 ")]),s("li",null,[s("a",{href:"#_2-生成瓦片"},"2. 生成瓦片 "),s("ul",null,[s("li",null,[s("a",{href:"#简单的生成瓦片"},"简单的生成瓦片 ")]),s("li",null,[s("a",{href:"#生成瓦片优化"},"生成瓦片优化 ")])])])])]),s("li",null,[s("a",{href:"#总结"},"总结 ")])])])])])]),s("blockquote",null,[s("p",null,[s("a",{href:"https://medium.com/@egiron/how-to-install-gdal-and-qgis-on-macos-catalina-ca690dca4f91",target:"_blank",rel:"noopener"},"1. 安装 GDAL"),s("a",{href:"https://www.osgeo.cn/gdal/programs/gdal2tiles.html",target:"_blank",rel:"noopener"},"2. GDAL 中文文档"),s("a",{href:"https://gdal.org/programs/gdal2tiles.html",target:"_blank",rel:"noopener"},"3. GDAL 官方英文文档"),s("a",{href:"https://github.com/dragonir/zelda-map/blob/master/README.md",target:"_blank",rel:"noopener"},"4. 灵感来源 - dragonir")])]),s("h1",{id:"tl-dr",tabindex:"-1"},[t("TL;DR "),s("a",{class:"header-anchor",href:"#tl-dr","aria-hidden":"true"},"#")]),s("p",null,"其实主要就是两步，一是将自己的地图切成瓦片，二是加载。"),s("ol",null,[s("li",null,"地图图片"),s("li",null,"设置坐标系"),s("li",null,"切成瓦片地图"),s("li",null,"加载")]),s("h2",{id:"前言",tabindex:"-1"},[t("前言 "),s("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#")]),s("p",null,"其实在使用地图软件或者地图 API 调用的时候，会发现地图缩放加载都是一片一片的图片拼接成一个大的地图。"),s("p",null,"之前使用 krpano 切歌全景图也是，原理都是很简单的想法，一个高清的图片太大了，小的可能几百兆，大的要十几个 G 了，这一下子加载，网络撑不住，渲染也撑不住。所以自然是分片，当前屏幕显示的范围是啥，就只加载这里的。"),s("p",null,[t("而将图片切成瓦片的工具，主流的 GIS 软件（ArcGIS，QGIS）自然都是可以，毕竟这里主题还是创建自己的地图。但是我这里直接使用开源的命令行工具， "),s("strong",null,"“gdal”"),t("，一是方便，二是也便于业务使用（用户上传一个自定义图片，后台服务调用生成渲染了）。")]),s("h2",{id:"准备",tabindex:"-1"},[t("准备 "),s("a",{class:"header-anchor",href:"#准备","aria-hidden":"true"},"#")]),s("p",null,"因为我是 Mac 电脑，所以使用的包管理器是 brew ，所以这里也都是用 brew 命令安装。"),s("h3",{id:"_1-安装-gdal",tabindex:"-1"},[t("1. 安装 GDAL "),s("a",{class:"header-anchor",href:"#_1-安装-gdal","aria-hidden":"true"},"#")]),s("p",null,"安装 GDAL 前置包，避免直接安装 GDAL 失败。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"brew"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," install"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," gdal"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --HEAD")])])]),s("p",null,"如果这个安装成功，那说明系统中该有的依赖都有，就可以继续下面的安装了。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"brew"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," install"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," gdal")])])]),s("p",null,"这里安装好了，可以查看一下版本。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#6A737D","--s-light":"#9CA0B0","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"## 会打印版本 2.4.4")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal-config"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --version")])])]),s("h3",{id:"_2-gdal-绑定-python",tabindex:"-1"},[t("2. GDAL 绑定 Python "),s("a",{class:"header-anchor",href:"#_2-gdal-绑定-python","aria-hidden":"true"},"#")]),s("p",null,"GDAL 实际是一个工具包，使用的是 Python ， 既然上一步已经安装好了，接下来就是绑定使用了。"),s("p",null,"先升级一下。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"pip3"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," install"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," —"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," upgrade"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," pip")])])]),s("p",null,"升级好了之后，安装一下。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"pip3"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," install"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," gdal=="),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}},"2.4.4")])])]),s("p",null,[t("这里的版本需要跟上面安装的 GDAL 的版本保持一致，"),s("code",null,"gdal-config --version"),t(" 打印的。")]),s("p",null,"这里就是安装好了！"),s("p",null,"偶尔可能安装失败，可能是需要的包没装上，这里最需要的包就是 Numpy ，主动安装一下也行。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"pip3"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," install"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," numpy")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#6A737D","--s-light":"#9CA0B0","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"# 或者使用这个也是一样的 brew install numpy")])])]),s("h2",{id:"使用",tabindex:"-1"},[t("使用 "),s("a",{class:"header-anchor",href:"#使用","aria-hidden":"true"},"#")]),s("p",null,"上面既然都已经安装好了，那么下面就开始使用命令操作 了。"),s("h3",{id:"_1-设置图片的坐标系和范围",tabindex:"-1"},[t("1. 设置图片的坐标系和范围 "),s("a",{class:"header-anchor",href:"#_1-设置图片的坐标系和范围","aria-hidden":"true"},"#")]),s("p",null,"熟悉 GIS 开发的都知道，地图中的点都是需要坐标系才能定位其坐标的。当然像 canvas 或者 svg 或者其他图形库的使用也是一样，有坐标系才有坐标点嘛。 而原来的图片是不具有坐标系，所以这里我们需要给其设定坐标系，同时也设定了图片的坐标范围，就是上下左右四个点在坐标系中的位置，这样也就是最大最小坐标点酒出来了。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal_translate"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -a_srs"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," EPSG:4326"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -a_ullr"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -180"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 90"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 180"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -90"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map.jpg"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif")])])]),s("p",null,"这个命令不懂的话，可以找 chatGPT 问一下。 这里简单说一下："),s("ul",null,[s("li",null,[s("code",null,"-a_srs EPSG:4326"),t(" 就是声明坐标系为 84")]),s("li",null,[s("code",null,"-180 90 180 -90"),t(" 是图片的坐标点范围 "),s("code",null,"left top right bottom")])]),s("h3",{id:"_2-生成瓦片",tabindex:"-1"},[t("2. 生成瓦片 "),s("a",{class:"header-anchor",href:"#_2-生成瓦片","aria-hidden":"true"},"#")]),s("p",null,"这里前面几步都是简要介绍，直接使用的后，可以看最后。"),s("h4",{id:"简单的生成瓦片",tabindex:"-1"},[t("简单的生成瓦片 "),s("a",{class:"header-anchor",href:"#简单的生成瓦片","aria-hidden":"true"},"#")]),s("p",null,"上面已经由图片生成具有坐标系和范围的图片了，而这里就是切成瓦片。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal2tiles.py"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -p"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," raster"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -z"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," 0-5"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," out_dir")])])]),s("p",null,[t("这里的 0-5 就是最小的层级是 0 ，最大为 5 。这样处理完成之后，会在相对目录下生成一个 "),s("code",null,"output-directory"),t(" 文件夹，里面就是有生成的瓦片地图了，同时也会有个 "),s("code",null,"openlayers.html"),t(" 。双击 HTML 文件，就能直接在浏览器中预览刚才生成了瓦片了。")]),s("h4",{id:"生成瓦片优化",tabindex:"-1"},[t("生成瓦片优化 "),s("a",{class:"header-anchor",href:"#生成瓦片优化","aria-hidden":"true"},"#")]),s("p",null,"但是会有点小问题，因为发现瓦片虽然生成了，图片也预览，但是瓦片拼接处会有黑色的线，这是因为在生成瓦片的时候，没有对边缘进行处理。"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal2tiles.py"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -p"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," raster"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -z"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," 0-5"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --xyz"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --resampling=lanczos"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tilesize=258"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tiledriver=PNG"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," out_dir")])])]),s("p",null,[t("这里是自动生成的 OpenLayers HTML ，如果想要生成 LeafLet 的话，需要加个参数 "),s("code",null,"-w leaflet"),t("，比如（当然这个命令比较长了，只关注 leaftlet 就行了）：")]),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdalwarp"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -t_srs"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," EPSG:3857"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -dstnodata"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 0"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_corrected.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_projected.tif")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal2tiles.py"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -p"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," raster"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -z"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," 0-5"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -w"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," leaflet"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --xyz"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --resampling=bilinear"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tile-size=256"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_projected.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," output-directory")])])]),s("p",null,"以上这样是对其处理了一下，当然还有别的方法，这里不细说，就是简单说一下如何使用两个命令将一个图片切成瓦片然后在地图中加载。"),s("h2",{id:"总结",tabindex:"-1"},[t("总结 "),s("a",{class:"header-anchor",href:"#总结","aria-hidden":"true"},"#")]),s("ol",null,[s("li",null,"处理图片")]),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#6A737D","--s-light":"#9CA0B0","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"# left top right bottom")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal_translate"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -a_srs"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," EPSG:4326"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -a_ullr"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -180"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 90"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 180"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -90"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map.jpg"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif")])])]),s("ol",{start:"2"},[s("li",null,"生成瓦片")]),s("p",null,"OpenLayers - 默认"),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal2tiles.py"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -p"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," raster"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -z"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," 0-5"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --xyz"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --resampling=lanczos"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tilesize=258"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tiledriver=PNG"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," out_dir")])])]),s("ol",{start:"3"},[s("li",null,"加载")]),s("p",null,"这个其实看自动生成的就知道了，很简单几行。如果想深入，那么自行了解 Leaflet、OpenLayers、Mapbox 等。"),s("ol",{start:"4"},[s("li",null,"其他 如果想生成瓦片用 Leaflet 加载的话，那么如下操作：")]),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-bash"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"gdal2tiles.py"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -p"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," raster"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -z"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," 0-5"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," -w"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," leaflet"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --xyz"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --resampling=lanczos"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tilesize=258"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#40A02B"}}," --tiledriver=PNG"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," map_1.tif"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}}," out_dir_leaf")])])]),s("p",null,"新建一个 leaflet.html 文件并写入："),s("pre",{class:"shiki shiki-themes github-dark catppuccin-latte",style:{"--s-dark":"#e1e4e8","--s-light":"#4c4f69","--s-dark-bg":"#24292e","--s-light-bg":"#eff1f5"},tabindex:"0"},[s("code",{class:"language-html"},[s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#8839EF"}},"<!"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#8839EF"}},"DOCTYPE"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," html"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#8839EF"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"<"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"html"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"<"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"head"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"title"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"Leaflet Map"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"</"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"title"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"meta"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," charset"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"utf-8"'),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}}," />")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"meta"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," name"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"viewport"'),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," content"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"width=device-width, initial-scale=1.0"'),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"link"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," rel"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"stylesheet"'),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," href"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"'),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}}," />")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"style"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#B392F0","--s-light":"#7C7F93"}},"    #"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}},"map"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#1E66F5"}},"      width"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 100"),s("span",{style:{"--s-dark":"#F97583","--s-light":"#FE640B"}},"%"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},";")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#1E66F5"}},"      height"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 600"),s("span",{style:{"--s-dark":"#F97583","--s-light":"#8839EF"}},"px"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},";")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},"    }")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"  <"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"/"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"style"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"</"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"head"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"<"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"body"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"div"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," id"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"map"'),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"></"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"div"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"script"),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#DF8E1D"}}," src"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},'"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"'),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"<"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"/"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"script"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"  <"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"script"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#F97583","--s-light":"#8839EF"}},"    var"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}}," map "),s("span",{style:{"--s-dark":"#F97583","--s-light":"#179299"}},"="),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," L"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"."),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"map"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"("),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},"'map'"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},")"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"."),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"setView"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"(["),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}},"0"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},","),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 0"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"]"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},","),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 2"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},")"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},";")]),t(`
`),s("span",{class:"line"}),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}},"    L"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"."),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"tileLayer"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"("),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},"'out_dir_leaf/{z}/{x}/{y}.png'"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},","),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}}," {")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"      maxZoom"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 5"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"      minZoom"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," 0"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"      continuousWorld"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," true"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"      noWrap"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#79B8FF","--s-light":"#FE640B"}}," true"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},",")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"      attribution"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},":"),s("span",{style:{"--s-dark":"#9ECBFF","--s-light":"#40A02B"}},` 'Map data © <a href="https://yourdomain.com">Your Name</a>'`)]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},"    }"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},")"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"."),s("span",{style:{"--s-dark":"#B392F0","--s-light":"#1E66F5","--s-dark-font-style":"inherit","--s-light-font-style":"italic"}},"addTo"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"(map)"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#7C7F93"}},";")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#4C4F69"}},"  <"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"/"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"script"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"</"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"body"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")]),t(`
`),s("span",{class:"line"},[s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},"</"),s("span",{style:{"--s-dark":"#85E89D","--s-light":"#1E66F5"}},"html"),s("span",{style:{"--s-dark":"#E1E4E8","--s-light":"#179299"}},">")])])]),s("p",null,"双击浏览就好了，但是这里好像发现，瓦片边缘有白色。")],-1),A="创建一个自己的自定义地图",u="2024/05/19",f="WebGIS",m=["#全部","#一般"],b="https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/imagesPasted%20image%2020240327153535.png",C="https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png",_="WebGIS",D=[{property:"og:title",content:"创建一个自己的自定义地图"},{name:"twitter:title",content:"创建一个自己的自定义地图"},{name:"description",content:"WebGIS"},{property:"og:description",content:"WebGIS"},{name:"twitter:description",content:"WebGIS"},{property:"og:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:card",content:"summary_large_image"}],x={__name:"24-创建一个自己的自定义地图",setup(d,{expose:a}){const l={title:"创建一个自己的自定义地图",date:"2024/05/19",desc:"WebGIS",tags:["#全部","#一般"],cover:"https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/imagesPasted%20image%2020240327153535.png",image:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png",description:"WebGIS",meta:[{property:"og:title",content:"创建一个自己的自定义地图"},{name:"twitter:title",content:"创建一个自己的自定义地图"},{name:"description",content:"WebGIS"},{property:"og:description",content:"WebGIS"},{name:"twitter:description",content:"WebGIS"},{property:"og:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:card",content:"summary_large_image"}]};return a({frontmatter:l}),n({title:"创建一个自己的自定义地图",meta:[{property:"og:title",content:"创建一个自己的自定义地图"},{name:"twitter:title",content:"创建一个自己的自定义地图"},{name:"description",content:"WebGIS"},{property:"og:description",content:"WebGIS"},{name:"twitter:description",content:"WebGIS"},{property:"og:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:image",content:"https://mmeme.me/og%2F24-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE.png"},{name:"twitter:card",content:"summary_large_image"}]}),(F,k)=>{const e=i;return r(),p(e,{frontmatter:l},{default:E(()=>[h]),_:1})}}};export{b as cover,u as date,x as default,f as desc,_ as description,C as image,D as meta,m as tags,A as title};
