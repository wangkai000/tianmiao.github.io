{
  "version": 3,
  "sources": ["../../node_modules/.pnpm/vue-router-better-scroller@0.0.0_t6yugvvfk3qpnriubpgidwndjm/node_modules/vue-router-better-scroller/dist/index.mjs"],
  "sourcesContent": ["import { nextTick } from 'vue';\nimport { isNavigationFailure } from 'vue-router';\n\nconst STATE_KEY = \"vueRouterScroller\";\nfunction setupRouterScroller(router, options) {\n  if (router.options.scrollBehavior)\n    console.warn(\"`scrollBehavior` options in Vue Router is overwritten by `vue-router-scroller` plugin, you can remove it from createRouter()\");\n  router.options.scrollBehavior = () => {\n  };\n  const positionsMap = /* @__PURE__ */ new Map();\n  router.beforeResolve((to, from) => {\n    if (history.state?.current === to.fullPath)\n      return;\n    const pos = capturePositions(options);\n    const key = getScrollKey(from.fullPath);\n    positionsMap.set(key, pos);\n    history.replaceState({ ...history.state, [STATE_KEY]: pos }, \"\");\n  });\n  router.afterEach((to, from, failure) => {\n    if (isNavigationFailure(failure))\n      return;\n    const key = getScrollKey(to.fullPath);\n    const pos = history.state[STATE_KEY] || positionsMap.get(key);\n    const type = history.state[STATE_KEY] ? \"history\" : \"push\";\n    nextTick(() => {\n      applyPositions(to, from, pos, type, options);\n    });\n  });\n}\nfunction createRouterScroller(options) {\n  return {\n    install(app) {\n      const router = app.config.globalProperties.$router;\n      if (!router)\n        throw new Error(\"Router instance is not found on this Vue app. This plugin should be installed after Vue Router.\");\n      setupRouterScroller(router, options);\n    }\n  };\n}\nfunction getScrollKey(path, delta = 0) {\n  const position = history.state ? history.state.position - delta : -1;\n  return position + path;\n}\nfunction capturePositions(options) {\n  const pos = {};\n  for (const [selector] of Object.entries(options.selectors)) {\n    const element = querySelector(selector);\n    if (!element)\n      continue;\n    pos[selector] = getScrollPosition(element);\n  }\n  return pos;\n}\nfunction querySelector(name) {\n  if (typeof window === \"undefined\")\n    return void 0;\n  if (name === \"body\")\n    return document.body;\n  if (name === \"window\")\n    return window;\n  return document.querySelector(name);\n}\nfunction getScrollPosition(el) {\n  if (el instanceof Window)\n    return { left: window.scrollX, top: window.scrollY };\n  else\n    return { left: el.scrollLeft, top: el.scrollTop };\n}\nasync function applyPositions(to, from, pos, type, options) {\n  for (const [selector, handler] of Object.entries(options.selectors)) {\n    const element = querySelector(selector);\n    if (!element)\n      continue;\n    let position = pos?.[selector];\n    if (typeof handler === \"function\") {\n      const result = await handler({\n        to,\n        from,\n        element,\n        selector,\n        type,\n        savedPosition: position\n      });\n      if (!result)\n        continue;\n      if (result !== true)\n        position = result;\n    } else if (handler === true) {\n      if (type === \"push\")\n        position = void 0;\n    }\n    element.scrollTo({\n      behavior: options.behavior,\n      ...position || { top: 0, left: 0 }\n    });\n  }\n}\n\nexport { createRouterScroller, setupRouterScroller };\n"],
  "mappings": ";;;;;;;;;AAGA,IAAM,YAAY;AAClB,SAAS,oBAAoB,QAAQ,SAAS;AAC5C,MAAI,OAAO,QAAQ;AACjB,YAAQ,KAAK,8HAA8H;AAC7I,SAAO,QAAQ,iBAAiB,MAAM;AAAA,EACtC;AACA,QAAM,eAA+B,oBAAI,IAAI;AAC7C,SAAO,cAAc,CAAC,IAAI,SAAS;AAVrC;AAWI,UAAI,aAAQ,UAAR,mBAAe,aAAY,GAAG;AAChC;AACF,UAAM,MAAM,iBAAiB,OAAO;AACpC,UAAM,MAAM,aAAa,KAAK,QAAQ;AACtC,iBAAa,IAAI,KAAK,GAAG;AACzB,YAAQ,aAAa,EAAE,GAAG,QAAQ,OAAO,CAAC,SAAS,GAAG,IAAI,GAAG,EAAE;AAAA,EACjE,CAAC;AACD,SAAO,UAAU,CAAC,IAAI,MAAM,YAAY;AACtC,QAAI,oBAAoB,OAAO;AAC7B;AACF,UAAM,MAAM,aAAa,GAAG,QAAQ;AACpC,UAAM,MAAM,QAAQ,MAAM,SAAS,KAAK,aAAa,IAAI,GAAG;AAC5D,UAAM,OAAO,QAAQ,MAAM,SAAS,IAAI,YAAY;AACpD,aAAS,MAAM;AACb,qBAAe,IAAI,MAAM,KAAK,MAAM,OAAO;AAAA,IAC7C,CAAC;AAAA,EACH,CAAC;AACH;AACA,SAAS,qBAAqB,SAAS;AACrC,SAAO;AAAA,IACL,QAAQ,KAAK;AACX,YAAM,SAAS,IAAI,OAAO,iBAAiB;AAC3C,UAAI,CAAC;AACH,cAAM,IAAI,MAAM,iGAAiG;AACnH,0BAAoB,QAAQ,OAAO;AAAA,IACrC;AAAA,EACF;AACF;AACA,SAAS,aAAa,MAAM,QAAQ,GAAG;AACrC,QAAM,WAAW,QAAQ,QAAQ,QAAQ,MAAM,WAAW,QAAQ;AAClE,SAAO,WAAW;AACpB;AACA,SAAS,iBAAiB,SAAS;AACjC,QAAM,MAAM,CAAC;AACb,aAAW,CAAC,QAAQ,KAAK,OAAO,QAAQ,QAAQ,SAAS,GAAG;AAC1D,UAAM,UAAU,cAAc,QAAQ;AACtC,QAAI,CAAC;AACH;AACF,QAAI,QAAQ,IAAI,kBAAkB,OAAO;AAAA,EAC3C;AACA,SAAO;AACT;AACA,SAAS,cAAc,MAAM;AAC3B,MAAI,OAAO,WAAW;AACpB,WAAO;AACT,MAAI,SAAS;AACX,WAAO,SAAS;AAClB,MAAI,SAAS;AACX,WAAO;AACT,SAAO,SAAS,cAAc,IAAI;AACpC;AACA,SAAS,kBAAkB,IAAI;AAC7B,MAAI,cAAc;AAChB,WAAO,EAAE,MAAM,OAAO,SAAS,KAAK,OAAO,QAAQ;AAAA;AAEnD,WAAO,EAAE,MAAM,GAAG,YAAY,KAAK,GAAG,UAAU;AACpD;AACA,eAAe,eAAe,IAAI,MAAM,KAAK,MAAM,SAAS;AAC1D,aAAW,CAAC,UAAU,OAAO,KAAK,OAAO,QAAQ,QAAQ,SAAS,GAAG;AACnE,UAAM,UAAU,cAAc,QAAQ;AACtC,QAAI,CAAC;AACH;AACF,QAAI,WAAW,2BAAM;AACrB,QAAI,OAAO,YAAY,YAAY;AACjC,YAAM,SAAS,MAAM,QAAQ;AAAA,QAC3B;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,eAAe;AAAA,MACjB,CAAC;AACD,UAAI,CAAC;AACH;AACF,UAAI,WAAW;AACb,mBAAW;AAAA,IACf,WAAW,YAAY,MAAM;AAC3B,UAAI,SAAS;AACX,mBAAW;AAAA,IACf;AACA,YAAQ,SAAS;AAAA,MACf,UAAU,QAAQ;AAAA,MAClB,GAAG,YAAY,EAAE,KAAK,GAAG,MAAM,EAAE;AAAA,IACnC,CAAC;AAAA,EACH;AACF;",
  "names": []
}
